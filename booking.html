<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Think Space B2S</title>
    <script src="https://www.gstatic.com/firebasejs/3.6.3/firebase.js"></script> 
    <script src="https://www.gstatic.com/firebasejs/3.6.1/firebase-app.js"></script> 
    <script src="https://www.gstatic.com/firebasejs/3.6.1/firebase-auth.js"></script> 
    <script src="https://www.gstatic.com/firebasejs/3.6.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/3.6.1/firebase-messaging.js"></script> 
    <script src="http://code.jquery.com/jquery-latest.min.js"></script> 
    <script src="/socket.io/socket.io.js"></script> 
    <script>         // Initialize Firebase 
    var config = {
        apiKey: "AIzaSyA_rWI-uQ5JyTo2QVUJb2ReO3j1B8hAriU",
        authDomain: "b2sthinkspace-dcda8.firebaseapp.com",
        databaseURL: "https://b2sthinkspace-dcda8.firebaseio.com",
        storageBucket: "b2sthinkspace-dcda8.appspot.com",
        messagingSenderId: "526906895408"
    };
    firebase.initializeApp(config);
    </script>

    <!-- CSS -->
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,400">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Droid+Sans">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Lobster">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/animate.css">
    <link rel="stylesheet" href="assets/css/magnific-popup.css">
    <link rel="stylesheet" href="assets/flexslider/flexslider.css">
    <link rel="stylesheet" href="assets/css/form-elements.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/media-queries.css">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="/resources/demos/style.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>

        $( function() {
            $( "#datepicker" ).datepicker();
        } );
    </script>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>


    <!-- Favicon and touch icons -->
    <link rel="icon" href="assets/ico/icon.png">
    <link rel="icon1" sizes="144x144" href="assets/ico/icon1.png">
    <link rel="icon2" sizes="114x114" href="assets/ico/icon2.png">
    <link rel="icon3" sizes="72x72" href="thinkspace/assets/ico/icon3.png">

</head>
<body>
<!-- Top menu -->
<nav class="navbar" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#top-navbar-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html">Think Space B2S</a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="top-navbar-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="index.html"><i class="fa fa-home"></i><br>Home</a>
                </li>
                <li>
                    <a href="map.html"><i class="fa fa-map-marker"></i><br>Map</a>
                </li>
                <li>
                    <a href="contact.html"><i class="fa fa-envelope"></i><br>Contact</a>
                </li>
                <li class="active">
                    <a onclick="loginOrProfile()" ><i class="fa fa-user"></i><br>Login</a>
                </li>


            </ul>
        </div>
    </div>
</nav>
<!-- Page Title -->
<div class="page-title-container">
    <div class="container">
        <div class="row">
            <div class="col-sm-12 wow fadeIn">
                <i class="fa fa-user"></i>
                <h1>Booking </h1>

            </div>
        </div>
    </div>
</div>
<br>
<p>Date: <input type="text" id="datepicker"></p>
<div class="form-group">
    <label >PEOPLE</label>
    <select id="people">
        <option id="1">1</option>
        <option id="2">2</option>
        <option id="3">3</option>
        <option id="4">4</option>
        <option id="5">5</option>
        <option id="6">6</option>
        <option id="7">7</option>
        <option id="8">8</option>
        <option id="9">9</option>
        <option id="10">10</option>
        <option id="11">11</option>
        <option id="12">12</option>
        <option id="13">13</option>
        <option id="14">14</option>
        <option id="15">15</option>
        <option id="16">16</option>
        <option id="17">17</option>
        <option id="18">18</option>
        <option id="19">19</option>
        <option id="20">20</option>
        <option id="21">21</option>
        <option id="22">22</option>
        <option id="23">23</option>
        <option id="24">24</option>
        <option id="25">25</option>
        <option id="26">26</option>
        <option id="27">27</option>
        <option id="28">28</option>
        <option id="29">29</option>
        <option id="30">30</option>

    </select>
</div>


<button style=" background-color:  #4c67c0;"onclick="booking()" type="submit" class="btn">book</button>
</body>
<footer>
    <div class="container">
        <div class="row">
            <div class="col-sm-4 footer-box wow fadeInUp">
                <h4>Who we are</h4>
                <div class="footer-box-text">
                    <p>
                        B2S is a central group company established in 2011.
                        No.1 Thailand lifestyle bookstore offering curated books and lifestyle merchandises for every lifestyle.
                    </p>

                </div>
            </div>
            <div class="col-sm-4 footer-box wow fadeInUp">
                <h4>Our vision</h4>
                <div class="footer-box-text">
                    <p>
                        To be the most outstanding inspiration and thoughtful brand in Thailand. To leverage knowledge and creativity in arts and creative segment among thai communities.
                    </p>

                </div>
            </div>

            <div class="col-sm-4 footer-box wow fadeInUp">
                <h4>Follow us</h4>
                <div class="footer-box-text footer-box-text-contact">
                    <a href="https://www.facebook.com/thinkspaceb2s"><i class="fa fa-facebook"></i> ThinkSpaceB2S</a>
                </div>
            </div>




        </div>

    </div>
</footer>


<!-- Javascript -->
<script >
    function loginOrProfile() {
        firebase.auth().onAuthStateChanged(function(user) {
            if (user) {
                // User is signed in.
                window.location.href="profile.html";
            } else {
                // No user is signed in.
                window.location.href="login.html";
            }
        });
    }
</script>

</body>
<script>
    var datepicker = $('#datepicker');
    //var to = $('#to');
    var people = $('#people');
    var numUser=0;
    function booking(){
        var date = datepicker.val().toString();
        var newDate =date.replace("/","");
        newDate = newDate.replace("/","");
        firebase.database().ref("Room/"+newDate).once('value',function (snap) {
            if(snap.val() != null){
                if(snap.val()["numUser"]+people.val()<=30){
                    firebase.database().ref("Room/"+newDate).set({
                       numUser :  snap.val()["numUser"]+people.val()
                    });
                    firebase.database().ref("users/"+firebase.auth().currentUser.uid+"/booking/"+newDate).set({
                         numUser : people.val(),
                         date : newDate
                    });
                    window.location.href='profile.html';
                }else{
                    window.alert("All seats are occupied for the chosen date. There might be available seat left for walk-in, please check with our staff. Sorry for inconvenience")
                }
            }else{
                firebase.database().ref("Room/"+newDate).set({
                    numUser : people.val()
                });
                firebase.database().ref("users/"+firebase.auth().currentUser.uid+"/booking/"+newDate).set({
                    numUser : people.val(),
                    date : newDate
                });
                window.location.href='profile.html';
            }
        })
     //   location.href='profile.html'
    }
</script>

</html>